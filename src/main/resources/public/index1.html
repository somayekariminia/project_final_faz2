<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta  charset="UTF-8"  http-equiv="refresh" content="600" charset=ISO-8859-1"
      name="viewport"
    />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Material Design for Bootstrap</title>
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.11.2/css/all.css"
    />
    <!-- Google Fonts Roboto -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
    />
    <!-- MDB -->
    <link rel="stylesheet" href="css/mdb.min.css" />
    <!-- Custom styles -->

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
      integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <section class="intro">
      <div
        class="bg-image h-100"
        style="
          background-image: url('https://mdbootstrap.com/img/Photos/new-templates/glassmorphism-article/img5.jpg');
        "
      >
        <div class="mask d-flex align-items-center h-100">
          <div class="container">
            <div class="row justify-content-center">
              <div class="col-12 col-md-10 col-lg-7 col-xl-6">
                <div class="card mask-custom">
                  <div class="card-body p-5 text-white">
                    <div class="my-4">
                      <h2 class="text-center mb-5">online payment</h2>

                      <form>
                        <!-- orderId input -->
                        <div class="form-outline form-white mb-4">
                          <input
                            type="text"
                            id="orderId"
                            class="form-control form-control-lg"
                          />
                          <label class="form-label" for="orderId"
                            >IdOrder</label
                          >
                        </div>

                        <!-- numberCard input -->
                        <div class="form-outline form-white mb-4">
                          <input
                            type="text"
                            id="numberCard"
                            class="form-control form-control-lg"
                            placeholder="0000-0000-0000-0000"
                          />
                          <label class="form-label" for="numberCard"
                            >numberCard</label
                          >
                        </div>
                        <!-- 2 column grid layout with text inputs for the ccv2 and  expiredDate -->
                        <div class="row">
                          <div class="col-12 col-md-6 mb-4">
                            <div class="form-outline form-white">
                              <input
                                type="text"
                                id="cvv2"
                                class="form-control form-control-lg"
                              />
                              <label class="form-label" for="cvv2"
                                >cvv2</label
                              >
                            </div>
                          </div>
                          <div class="col-12 col-md-6 mb-4">
                            <div class="form-outline form-white">
                              <input
                                type="text"
                                id="dateExpired"
                                class="form-control form-control-lg"
                                placeholder="yyyy-mm"
                              />
                              <label class="form-label" for="dateExpired"
                                >expiredDate</label
                              >
                            </div>
                          </div>
                        </div>
                        <div class="form-group">
                          <div class="col-md-6">
                            <img alt="captcha" src="/captcha-servlet">
                          </div>
                          <label for="captcha"> enter code </label>
                          <div class="col-md-6">

                            <input class="form-control" type="text" id="captcha" placeholder="Enter Captcha"
                                   required="true"/>
                          </div>
                        </div>
                        <br>
                        <br>
                        <!-- Submit button -->
                        <button
                          type="submit"
                          id="submit"
                          class="btn btn-light btn-block mb-4"
                        >
                          payment
                        </button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- MDB -->
    <script type="text/javascript" src="js/mdb.min.js"></script>
    <!-- Custom scripts -->
    <script type="text/javascript" src="js/script.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"
            integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
            integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <script>
      $("#submit").on('click', function (e) {
        e.preventDefault();
        const orderId = document.getElementById("orderId");
        const numberCard = document.getElementById("numberCard");
        const cvv2 = document.getElementById("cvv2");
        const dateExpired = document.getElementById("dateExpired");
        const captcha = document.getElementById("captcha");

        const form = new FormData();
        form.append("numberCard", numberCard.value);
        form.append("cvv2", cvv2.value);
        form.append("orderId", orderId.value);
        form.append("dateExpired", dateExpired.value);
        form.append("captcha", captcha.value);

        $.ajax({
          type: "POST",
          url: "http://localhost:8585/pay/paymentOfCard",
          data: form,
          processData: false,
          contentType: false,
          dataType: "text",
          success: function (response) {
            e.preventDefault();
            alert("Your payment has been successfully made")
          }, error: function (jqXHR, textStatus, errorThrown) {
            e.preventDefault();
            alert("please enter information incorrect");
          }
        });
      })

    </script>
  </body>
</html>
